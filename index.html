<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Azan Tool - AI Image Generator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: {
                            50: '#f0f9ff',
                            100: '#e0f2fe',
                            200: '#bae6fd',
                            300: '#7dd3fc',
                            400: '#38bdf8',
                            500: '#0ea5e9',
                            600: '#0284c7',
                            700: '#0369a1',
                            800: '#075985',
                            900: '#0c4a6e',
                        }
                    },
                    animation: {
                        'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                        'float': 'float 6s ease-in-out infinite',
                    },
                    keyframes: {
                        float: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-10px)' },
                        }
                    }
                }
            }
        }
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            transition: background-color 0.3s, color 0.3s;
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .card-hover {
            transition: transform 0.3s, box-shadow 0.3s;
        }
        
        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        
        .fade-in {
            animation: fadeIn 0.8s ease-in-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .image-container {
            transition: transform 0.3s;
        }
        
        .image-container:hover {
            transform: scale(1.02);
        }
        
        .loading-dots:after {
            content: '';
            animation: dots 1.5s infinite;
        }
        
        @keyframes dots {
            0%, 20% { content: '.'; }
            40% { content: '..'; }
            60%, 100% { content: '...'; }
        }

        .error-shake {
            animation: shake 0.5s linear;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }
    </style>
</head>
<body class="bg-gray-50 dark:bg-gray-900 min-h-screen">
    <!-- Navigation -->
    <nav class="bg-white dark:bg-gray-800 shadow-md">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <div class="flex-shrink-0 flex items-center">
                        <i class="fas fa-robot text-2xl text-primary-600 dark:text-primary-400"></i>
                        <span class="ml-2 text-xl font-bold text-gray-800 dark:text-white">Azan Tool</span>
                    </div>
                    <div class="hidden md:ml-6 md:flex md:space-x-8">
                        <a href="#" class="border-primary-500 text-gray-900 dark:text-white inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium">
                            Generator
                        </a>
                        <a href="#" class="border-transparent text-gray-500 dark:text-gray-300 hover:border-gray-300 hover:text-gray-700 dark:hover:text-white inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium">
                            History
                        </a>
                        <a href="#" class="border-transparent text-gray-500 dark:text-gray-300 hover:border-gray-300 hover:text-gray-700 dark:hover:text-white inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium">
                            Favorites
                        </a>
                    </div>
                </div>
                <div class="flex items-center">
                    <button id="theme-toggle" class="p-2 rounded-full text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700">
                        <i class="fas fa-moon dark:hidden"></i>
                        <i class="fas fa-sun hidden dark:block"></i>
                    </button>
                    <button class="ml-4 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500">
                        <i class="fas fa-sign-in-alt mr-2"></i>
                        Sign in
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <!-- Hero Section -->
        <div class="text-center mb-12 fade-in">
            <h1 class="text-4xl font-extrabold text-gray-900 dark:text-white sm:text-5xl sm:tracking-tight">
                Transform Your Imagination Into Art
            </h1>
            <p class="mt-3 max-w-md mx-auto text-base text-gray-500 dark:text-gray-300 sm:text-lg md:mt-5 md:text-xl md:max-w-3xl">
                Powered by AI to generate stunning images from text descriptions. Choose a style and bring your ideas to life.
            </p>
        </div>

        <!-- Generator Section -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <!-- Input Panel -->
            <div class="lg:col-span-1">
                <div class="bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 card-hover">
                    <div class="space-y-6">
                        <div>
                            <label for="prompt" class="block text-sm font-medium text-gray-700 dark:text-gray-300">
                                Describe your image
                            </label>
                            <div class="mt-1">
                                <textarea 
                                    id="prompt" 
                                    rows="4" 
                                    class="shadow-sm focus:ring-primary-500 focus:border-primary-500 block w-full sm:text-sm border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-md p-3" 
                                    placeholder="Describe the image you want... (e.g. A futuristic city with flying cars and neon lights)"></textarea>
                            </div>
                        </div>

                        <div>
                            <label for="style" class="block text-sm font-medium text-gray-700 dark:text-gray-300">
                                Select Style
                            </label>
                            <select id="style" class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md">
                                <option value="realistic">Realistic</option>
                                <option value="3d">3D Render</option>
                                <option value="anime">Anime</option>
                                <option value="digital">Digital Art</option>
                                <option value="fantasy">Fantasy Art</option>
                                <option value="oil">Oil Painting</option>
                                <option value="watercolor">Watercolor</option>
                                <option value="pixel">Pixel Art</option>
                            </select>
                        </div>

                        <div class="flex space-x-4">
                            <button id="generate-btn" class="flex-1 inline-flex justify-center items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500">
                                <i class="fas fa-magic mr-2"></i>
                                Generate
                            </button>
                            <button id="surprise-btn" class="flex-1 inline-flex justify-center items-center px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md shadow-sm text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500">
                                <i class="fas fa-surprise mr-2"></i>
                                Surprise Me
                            </button>
                        </div>

                        <div class="hidden" id="loading-section">
                            <div class="rounded-md bg-primary-50 dark:bg-primary-900/30 p-4">
                                <div class="flex">
                                    <div class="flex-shrink-0">
                                        <i class="fas fa-circle-notch fa-spin text-primary-500"></i>
                                    </div>
                                    <div class="ml-3">
                                        <h3 class="text-sm font-medium text-primary-800 dark:text-primary-200">
                                            Generating your image
                                        </h3>
                                        <div class="mt-2 text-sm text-primary-700 dark:text-primary-300">
                                            <p class="loading-dots">This may take a few seconds</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="hidden" id="error-section">
                            <div class="rounded-md bg-red-50 dark:bg-red-900/30 p-4 error-shake">
                                <div class="flex">
                                    <div class="flex-shrink-0">
                                        <i class="fas fa-exclamation-circle text-red-400"></i>
                                    </div>
                                    <div class="ml-3">
                                        <h3 class="text-sm font-medium text-red-800 dark:text-red-200">
                                            Error generating image
                                        </h3>
                                        <div class="mt-2 text-sm text-red-700 dark:text-red-300">
                                            <p id="error-message">There was a problem with the API request. Please try again.</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- History Panel (Collapsible) -->
                <div class="mt-6 bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden">
                    <div class="px-4 py-5 sm:px-6 flex items-center justify-between cursor-pointer" id="history-header">
                        <h3 class="text-lg leading-6 font-medium text-gray-900 dark:text-white">
                            Recent Generations
                        </h3>
                        <i class="fas fa-chevron-down text-gray-500 transform transition-transform" id="history-arrow"></i>
                    </div>
                    <div class="border-t border-gray-200 dark:border-gray-700 px-4 py-5 sm:p-6 hidden" id="history-content">
                        <ul class="space-y-4" id="history-list">
                            <!-- History items will be added here dynamically -->
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Output Panel -->
            <div class="lg:col-span-2">
                <div class="bg-white dark:bg-gray-800 rounded-lg shadow-md p-6">
                    <h2 class="text-lg font-medium text-gray-900 dark:text-white mb-4">Generated Image</h2>
                    
                    <div class="rounded-lg border-2 border-dashed border-gray-300 dark:border-gray-700 p-8 text-center" id="output-placeholder">
                        <i class="fas fa-image text-4xl text-gray-400 mx-auto"></i>
                        <h3 class="mt-2 text-sm font-medium text-gray-900 dark:text-white">Your generated image will appear here</h3>
                        <p class="mt-1 text-sm text-gray-500 dark:text-gray-400">Describe an image and click Generate to get started</p>
                    </div>
                    
                    <div class="hidden" id="output-result">
                        <div class="relative group">
                            <div class="aspect-w-16 aspect-h-9 bg-gray-200 dark:bg-gray-700 rounded-lg overflow-hidden">
                                <img id="generated-image" class="object-cover w-full h-full" src="" alt="Generated image">
                            </div>
                            <div class="absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-10 transition-all duration-300 rounded-lg"></div>
                        </div>
                        
                        <div class="mt-4 flex justify-between items-center">
                            <div>
                                <p class="text-sm text-gray-500 dark:text-gray-400">Style: <span id="image-style" class="font-medium">Realistic</span></p>
                                <p class="text-sm text-gray-500 dark:text-gray-400">Prompt: <span id="image-prompt" class="font-medium"></span></p>
                            </div>
                            <div class="flex space-x-3">
                                <button id="regenerate-btn" class="inline-flex items-center px-3 py-2 border border-gray-300 dark:border-gray-600 shadow-sm text-sm font-medium rounded-md text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500">
                                    <i class="fas fa-sync-alt mr-2"></i>
                                    Regenerate
                                </button>
                                <button id="download-btn" class="inline-flex items-center px-3 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500">
                                    <i class="fas fa-download mr-2"></i>
                                    Download
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Gallery -->
                <div class="mt-8">
                    <h2 class="text-lg font-medium text-gray-900 dark:text-white mb-4">Community Gallery</h2>
                    <div class="grid grid-cols-2 md:grid-cols-3 gap-4" id="gallery">
                        <div class="image-container rounded-lg overflow-hidden bg-gray-200 dark:bg-gray-700 aspect-square">
                            <div class="h-full w-full flex items-center justify-center">
                                <i class="fas fa-image text-gray-400 text-3xl"></i>
                            </div>
                        </div>
                        <div class="image-container rounded-lg overflow-hidden bg-gray-200 dark:bg-gray-700 aspect-square">
                            <div class="h-full w-full flex items-center justify-center">
                                <i class="fas fa-image text-gray-400 text-3xl"></i>
                            </div>
                        </div>
                        <div class="image-container rounded-lg overflow-hidden bg-gray-200 dark:bg-gray-700 aspect-square">
                            <div class="h-full w-full flex items-center justify-center">
                                <i class="fas fa-image text-gray-400 text-3xl"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-white dark:bg-gray-800 mt-12">
        <div class="max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8">
            <div class="md:flex md:items-center md:justify-between">
                <div class="flex justify-center md:justify-start">
                    <div class="flex-shrink-0 flex items-center">
                        <i class="fas fa-robot text-xl text-primary-600 dark:text-primary-400"></i>
                        <span class="ml-2 text-xl font-bold text-gray-800 dark:text-white">Azan Tool</span>
                    </div>
                </div>
                <div class="mt-4 md:mt-0 md:order-1">
                    <p class="text-center text-base text-gray-400 dark:text-gray-500">
                        &copy; 2023 Azan Tool. All rights reserved.
                    </p>
                </div>
            </div>
        </div>
    </footer>

    <script>
        // Theme toggle functionality
        document.getElementById('theme-toggle').addEventListener('click', function() {
            if (document.documentElement.classList.contains('dark')) {
                document.documentElement.classList.remove('dark');
                localStorage.setItem('theme', 'light');
            } else {
                document.documentElement.classList.add('dark');
                localStorage.setItem('theme', 'dark');
            }
        });

        // Check for saved theme preference
        if (localStorage.getItem('theme') === 'dark' || 
            (window.matchMedia('(prefers-color-scheme: dark)').matches && !localStorage.getItem('theme'))) {
            document.documentElement.classList.add('dark');
        }

        // History section toggle
        document.getElementById('history-header').addEventListener('click', function() {
            const content = document.getElementById('history-content');
            const arrow = document.getElementById('history-arrow');
            
            content.classList.toggle('hidden');
            arrow.classList.toggle('rotate-180');
        });

        // Store generated images
        let generatedImages = JSON.parse(localStorage.getItem('azanToolHistory')) || [];
        let currentImage = null;

        // Update history display
        function updateHistoryDisplay() {
            const historyList = document.getElementById('history-list');
            historyList.innerHTML = '';
            
            if (generatedImages.length === 0) {
                historyList.innerHTML = '<li class="text-center text-gray-500 dark:text-gray-400 py-4">No generation history yet</li>';
                return;
            }
            
            // Show latest 5 items
            const recentItems = generatedImages.slice(-5).reverse();
            
            recentItems.forEach(item => {
                const li = document.createElement('li');
                li.className = 'flex items-center cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700 p-2 rounded';
                
                li.innerHTML = `
                    <div class="flex-shrink-0 h-10 w-10 rounded-md bg-gray-200 dark:bg-gray-700 overflow-hidden">
                        <img src="${item.imageUrl}" alt="${item.prompt}" class="h-full w-full object-cover">
                    </div>
                    <div class="ml-4">
                        <p class="text-sm font-medium text-gray-900 dark:text-white truncate max-w-xs">${item.prompt}</p>
                        <p class="text-sm text-gray-500 dark:text-gray-400">${item.style} • ${formatTimeAgo(item.timestamp)}</p>
                    </div>
                `;
                
                li.addEventListener('click', () => {
                    displayImage(item);
                });
                
                historyList.appendChild(li);
            });
        }

        // Format time ago
        function formatTimeAgo(timestamp) {
            const now = new Date();
            const diff = now - new Date(timestamp);
            const minutes = Math.floor(diff / 60000);
            const hours = Math.floor(diff / 3600000);
            const days = Math.floor(diff / 86400000);
            
            if (minutes < 1) return 'Just now';
            if (minutes < 60) return `${minutes} min ago`;
            if (hours < 24) return `${hours} hr ago`;
            return `${days} day${days > 1 ? 's' : ''} ago`;
        }

        // Display image in output
        function displayImage(imageData) {
            const outputPlaceholder = document.getElementById('output-placeholder');
            const outputResult = document.getElementById('output-result');
            const generatedImage = document.getElementById('generated-image');
            const imageStyle = document.getElementById('image-style');
            const imagePrompt = document.getElementById('image-prompt');
            
            outputPlaceholder.classList.add('hidden');
            outputResult.classList.remove('hidden');
            
            generatedImage.src = imageData.imageUrl;
            imageStyle.textContent = imageData.style;
            imagePrompt.textContent = imageData.prompt;
            
            currentImage = imageData;
        }

        // Simulate API call
        function simulateApiCall(prompt, style) {
            return new Promise((resolve, reject) => {
                // Simulate API delay
                setTimeout(() => {
                    // Simulate occasional API failure (10% chance)
                    if (Math.random() < 0.1) {
                        reject(new Error('API service temporarily unavailable. Please try again later.'));
                        return;
                    }
                    
                    // Generate a unique image based on prompt and style
                    const seed = prompt.split('').reduce((a, b) => a + b.charCodeAt(0), 0);
                    const width = 800;
                    const height = 450;
                    
                    // Create a unique placeholder image based on the prompt
                    const imageUrl = `https://picsum.photos/seed/${seed}/${width}/${height}?blur=2`;
                    
                    resolve({
                        imageUrl,
                        prompt,
                        style,
                        timestamp: new Date().toISOString()
                    });
                }, 2500);
            });
        }

        // Generate button functionality
        document.getElementById('generate-btn').addEventListener('click', async function() {
            const prompt = document.getElementById('prompt').value;
            if (!prompt) {
                showError('Please enter a description first');
                document.getElementById('prompt').classList.add('error-shake');
                setTimeout(() => {
                    document.getElementById('prompt').classList.remove('error-shake');
                }, 500);
                return;
            }

            const styleSelect = document.getElementById('style');
            const style = styleSelect.options[styleSelect.selectedIndex].text;
            
            const loadingSection = document.getElementById('loading-section');
            const errorSection = document.getElementById('error-section');
            const outputPlaceholder = document.getElementById('output-placeholder');
            const outputResult = document.getElementById('output-result');
            
            // Show loading state, hide error and previous results
            loadingSection.classList.remove('hidden');
            errorSection.classList.add('hidden');
            outputPlaceholder.classList.add('hidden');
            outputResult.classList.add('hidden');
            
            try {
                const imageData = await simulateApiCall(prompt, style);
                
                // Add to history
                generatedImages.push(imageData);
                localStorage.setItem('azanToolHistory', JSON.stringify(generatedImages));
                updateHistoryDisplay();
                
                // Display the result
                displayImage(imageData);
            } catch (error) {
                showError(error.message);
            } finally {
                loadingSection.classList.add('hidden');
            }
        });

        // Show error message
        function showError(message) {
            const errorSection = document.getElementById('error-section');
            const errorMessage = document.getElementById('error-message');
            
            errorMessage.textContent = message;
            errorSection.classList.remove('hidden');
            
            // Remove error shake animation and then re-add it to restart
            errorSection.classList.remove('error-shake');
            void errorSection.offsetWidth; // Trigger reflow
            errorSection.classList.add('error-shake');
        }

        // Regenerate button functionality
        document.getElementById('regenerate-btn').addEventListener('click', async function() {
            if (!currentImage) return;
            
            const prompt = currentImage.prompt;
            const style = currentImage.style;
            
            const loadingSection = document.getElementById('loading-section');
            const errorSection = document.getElementById('error-section');
            
            // Show loading state, hide error
            loadingSection.classList.remove('hidden');
            errorSection.classList.add('hidden');
            
            try {
                const imageData = await simulateApiCall(prompt, style);
                
                // Add to history
                generatedImages.push(imageData);
                localStorage.setItem('azanToolHistory', JSON.stringify(generatedImages));
                updateHistoryDisplay();
                
                // Display the result
                displayImage(imageData);
            } catch (error) {
                showError(error.message);
            } finally {
                loadingSection.classList.add('hidden');
            }
        });

        // Download button functionality
        document.getElementById('download-btn').addEventListener('click', function() {
            if (!currentImage) return;
            
            // Create a temporary anchor element
            const a = document.createElement('a');
            a.href = currentImage.imageUrl;
            a.download = `azan-tool-${Date.now()}.jpg`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
        });

        // Surprise me button functionality
        document.getElementById('surprise-btn').addEventListener('click', function() {
            const prompts = [
                "A futuristic city with flying cars and neon lights",
                "A mystical forest with glowing mushrooms and fairies",
                "An astronaut riding a horse on Mars",
                "A steampunk machine with gears and steam",
                "A underwater castle with mermaids and colorful fish",
                "A cyberpunk samurai in a rainy Tokyo street",
                "A dragon made of crystals flying over mountains",
                "A vintage camera that can see into the future"
            ];
            
            const styles = ["realistic", "3d", "anime", "digital", "fantasy", "oil", "watercolor", "pixel"];
            
            const randomPrompt = prompts[Math.floor(Math.random() * prompts.length)];
            const randomStyle = styles[Math.floor(Math.random() * styles.length)];
            
            document.getElementById('prompt').value = randomPrompt;
            document.getElementById('style').value = randomStyle;
        });

        // Initialize history display
        updateHistoryDisplay();

        // Pre-populate gallery with some examples
        const galleryImages = [
            { prompt: "Majestic mountain landscape at sunrise", style: "Realistic" },
            { prompt: "Cyberpunk city street in rainy night", style: "Digital Art" },
            { prompt: "Cute anime character with pink hair", style: "Anime" }
        ];

        const galleryElement = document.getElementById('gallery');
        galleryElement.innerHTML = '';
        
        galleryImages.forEach((img, index) => {
            const seed = img.prompt.split('').reduce((a, b) => a + b.charCodeAt(0), 0);
            const imageUrl = `https://picsum.photos/seed/${seed}/300/300`;
            
            const div = document.createElement('div');
            div.className = 'image-container rounded-lg overflow-hidden bg-gray-200 dark:bg-gray-700 aspect-square';
            div.innerHTML = `
                <img src="${imageUrl}" alt="${img.prompt}" class="w-full h-full object-cover">
                <div class="absolute inset-0 bg-black bg-opacity-0 hover:bg-opacity-30 transition-all duration-300 flex items-end">
                    <div class="p-3 text-white opacity-0 hover:opacity-100 transition-opacity duration-300">
                        <p class="text-sm font-medium truncate">${img.prompt}</p>
                        <p class="text-xs">${img.style}</p>
                    </div>
                </div>
            `;
            
            galleryElement.appendChild(div);
        });
    </script>
</body>
</html>
